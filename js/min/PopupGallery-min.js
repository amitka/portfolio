var PopupGallery=PopupGallery||{};PopupGallery=function(){"use strict";var e={},a=[],n=[],o=0,t=200,l=$(".gallery-button.left"),r=$(".gallery-button.right"),i=$(".img-frame"),c=$(".dots-container"),d=$(".sub-title"),f=$(".main-title"),s=function(){i.empty(),c.empty(),l.off("click",g).fadeTo(0,1),r.off("click",g).fadeTo(0,1)},u=function(a){e=a;var n=[];$.each(e.images,function(a){var o=p(e.images[a].fileName);n.push(o)}),$.when.all(n).then(function(e){console.log("All gallery promises resolved."),void 0!==e?m(e):console.log("LoadGallery: No images found.")})},p=function(e){var a=$.Deferred(),n=$("<img>",{src:"pics/"+e,class:"img-it-self"});return n.on("load",function(){a.resolve(n)}),n.on("error",function(){a.resolve()}),a.promise()},m=function(e){a=e,o=0,1===a.length?(l.fadeTo(0,0),r.fadeTo(0,0)):(T(),l.on("click",{param:-1},g),r.on("click",{param:1},g),$(n).on("click",function(e){console.log("click"),e.data={param:n.index(this)},g(e)})),h(),G()},g=function(e){1!==Math.abs(e.data.param)?o=e.data.param:o+=e.data.param,o>a.length-1?o=0:o<0&&(o=a.length-1),h()},h=function(){$(a[o]).appendTo(i).fadeTo(t,1,v),k()},v=function(){if(i.children().length>1){var e=$(i.children()[0]);e.fadeTo(t,0,y)}},y=function(){i.children().length>1&&i.children()[0].remove()},T=function(){c.empty();for(var e=0;e<a.length;e++){var o=$("<div>");0===e?o.addClass("dot active"):o.addClass("dot"),o.appendTo(c)}n=c.children()},k=function(){for(var e=0;e<n.length;e++)$(n[e]).removeClass("active");$(n[o]).addClass("active")},G=function(){d.text(e.project+", "+e.category),f.text(e.desc)};return{loadGallery:u,resetGallery:s}}(),$(document).ready(function(){"use strict"});